@model WebQuanLySinhVien.Models.ViewModels.UserProfile
@{
    ViewData["Title"] = "Thông tin người dùng";
    var userRole = User.FindFirst("Role")?.Value; // Lấy role từ Claims
    var isDisabled = userRole != "1" ? "disabled" : ""; // Chỉ Admin mới được chọn, nếu role khác 1 thì isDisabled = "disabled"
}
@if (ViewBag.Thongbao != null)
{
    <div class="alert alert-success">
        @ViewBag.Thongbao
    </div>
}
<div class="col-md-8">
    <div class="card">
        <div class="header">
            <h4 class="title">Edit Profile</h4>
        </div>
        <div class="content">
            <form asp-action="Profile" method="post">
                <div class="row">
                    <div class="col-md-5">
                        <div class="form-group">
                            <label>Mã số</label>
                            @if(userRole =="1")
                            {
                                <select asp-for="SelectedID" class="form-control" id="userSelect" onchange="redirectToProfile(this.value)">
                                    <option value="">-- Chọn ID --</option>
                                    @foreach (var id in Model.DanhSachID)
                                    {
                                        <option value="@id" selected="@(Model.SelectedID == id ? "selected" : null)">
                                            @id
                                        </option>
                                    }
                                </select>
                            } else
                            {
                                <input asp-for="SelectedID" class="form-control" readonly value="@Model.SelectedID">
                            }      
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label asp-for="Email" for="exampleInputEmail1">Email</label>
                            <input asp-for="Email" type="email" class="form-control" placeholder="Email" value="@Model.Email">
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label asp-for="Sdt">Số điện thoại</label>
                            <input asp-for="Sdt" type="number" class="form-control" placeholder="Số điện thoại" value="@Model.Sdt">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label asp-for="HoTen">Họ tên</label>
                            <input asp-for="HoTen" type="text" class="form-control" placeholder="Họ tên" value="@Model.HoTen">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label asp-for="GioiTinh">Giới tính</label>
                            <input asp-for="GioiTinh" type="text" class="form-control" placeholder="Giới tính" value="@Model.GioiTinh">
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label asp-for="NgaySinh">Ngày sinh</label>
                            <input asp-for="NgaySinh" type="date" class="form-control" placeholder="Ngày sinh" value="@Model.NgaySinh">
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label asp-for="DiaChi">Địa chỉ</label>
                            <input asp-for="DiaChi" type="text" class="form-control" placeholder="Địa chỉ" value="@Model.DiaChi ">
                        </div>
                    </div>
                </div>

                @* <div class="row">
                    <div class="col-md-12">
                        <div class="form-group">
                            <label>About Me</label>
                            <textarea rows="5" class="form-control" placeholder="Here can be your description" value="Mike">Lamborghini Mercy, I'm in that two seat Lambo.</textarea>
                        </div>
                    </div>
                </div> *@

                <button type="submit" class="btn btn-info btn-fill pull-right">Cập nhật</button>
                <div class="clearfix"></div>
            </form>
        </div>
    </div>
</div> 
@* <select class="form-control" id="userSelect" onchange="redirectToProfile(this.value)">
    <option value="">-- Chọn ID --</option>
    @foreach (var id in Model.DanhSachID)
    {
        <option value="@id" selected="@(Model.SelectedID == id ? "selected" : null)">
            @id
        </option>
    }
</select> *@
<script>
    function redirectToProfile(selectedID) {
        if (selectedID) {
            window.location.href = '@Url.Action("Profile", "UserProfile")' + '?selectedID=' + selectedID;
        }
    }
</script>

